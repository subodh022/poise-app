["function _d4ea791d3861e169d81315cc2eee224f7e14ac0e",50,614971,"Time:function(){return Ext.Date.format(new Date(),\"Y-m-d",615000,14501,"ws_",629478,290,"state\",type:\"string\"},{name:\"mac_state\",type:\"string\"},{name:\"message\",type:\"string\"},{name:\"mac_messag",629665,33,"s_attendance",652938,32,"Workstation",655888,38,"portTime",630783,40,632132,39,"data:[{id:\"09:00:00\"},{id:\"10:00:00\"},{id:\"11:00:00\"},{id:\"12:00:00\"},{id:\"13:30:00\"},{id:\"14:30:00\"},{id:\"15:30:00\"},{id:\"16:30:00\"}]",632326,62,669520,35,649344,57,636251,42,632526,191,"og-",632880,40,632756,44,"og-",632880,40,632839,42,"og-",632880,575,633704,2516,632448,98,636300,172,"dynamic-list ",636472,70,"list",636539,65,"list",636598,220,"cls:\"attendance-v",635311,40,633357,127,633750,177,650750,44,637201,1031,630772,322,"model.Sec",629417,84,"line_id\",type:\"int\"},{name:\"name\",type:\"string\"},{name:\"enabled\",type:\"boolean",652938,32,"Section",655888,36,"Sec",630330,50,"Section\",storeId:\"Section",655999,68,"sectio",631295,53,"section\"}}}},0,0,0,0,[\"store.sections\"],0,[Poise.store,\"Section",656191,38,631101,356,630323,79,630000,49,"'<i class=\"fa fa-tag\"></i> Section: '+",630459,115,630139,284,"sorters:[{property:\"ws_id\",direction:\"ASC\"}]",630013,36,"'<i class=\"fa fa-tag\"></i> Section: '+",630459,313,638232,1287,"k,j,g){Ext.Viewport",440365,37,"\"Loading data...\"});var b",639531,34,"f",639566,41,"h=Ext.getStore(\"Sections\"",661639,37,"var a=localStorage.getItem(\"line",668297,43,"c},callback:function(){k",639725,66,"b);k",639795,64,"b);k",639863,64,"b)}});f",668303,37,"c},callback:function(){k.up(\"home\").down(\"dynamicop",668359,49,"f);k.up(\"home\").down(\"dynamicmac",668359,33,"mac_list\").setStore(f);Ext.Viewport.setMasked(false)}});h.load({params:{line_id:a},callback:function(){k.up(\"home\").down(\"#outputChart\").down(\"#reportSection\").setStore(h);k.up(\"home\").down(\"#downtimeChart\").down(\"#reportSection\").setStore(h);k.up(\"home\").down(\"#reworkChart\").down(\"#reportSection\").setStore(h)}});this.loadDynamicDashboard(",640007,482,",loadDynamicDashboard:function(",665844,69,"a.loadDynamicDashboard(",640487,4960,647642,39,646907,249,"font-weight: bold; padding-top: 0.5em;\",flex:1},{xtype:\"panel\",layout:\"hbox\",flex:2,align:\"center\",items:[",650608,41,"label:\"Date : \",labelWidth:\"auto",633824,51,"cls:\"filters\",align:\"center",637103,54,"lastSevenDays()}",647343,37,"Section\",displayField:\"name\",label:\"Section : \",labelWidth:\"auto",647405,35,"filters\",align:\"center\"}]",650816,32,645821,72,"right",647312,32,647562,337,"Sec",646414,38,"font-weight: bold; padding-top: 0.5em;\",flex:1},{xtype:\"panel\",layout:\"hbox\",flex:2,items:[",650608,41,"label:\"Date : \",labelWidth:\"auto",633824,51,"cls:\"filters\",flex:1",637104,53,"lastSevenDays()}}]",650816,32,645821,72,"right",648101,40,"]},",661357,35,646826,42,"downtime",647648,33,645488,255,"font-weight: bold; padding-top: 0.5em;\",flex:1},{xtype:\"panel\",layout:\"hbox\",flex:2,align:\"center\",items:[",650608,41,"label:\"Date : \",labelWidth:\"auto",633824,51,"cls:\"filters\",align:\"center",637103,54,"lastSevenDays()}",647343,37,"Section\",displayField:\"name\",label:\"Section : \",labelWidth:\"auto",647405,35,"filters\",align:\"center\"}]",650816,32,645821,72,"right",645899,34,646089,363,"font-weight: bold; padding-top: 0.5em;\",flex:1},{xtype:\"panel\",layout:\"hbox\",flex:2,align:\"center\",items:[",650608,41,"label:\"Date : \",labelWidth:\"auto",633824,51,"cls:\"filters\",align:\"center",637103,54,"lastSevenDays()}",647343,37,"Section\",displayField:\"name\",label:\"Section : \",labelWidth:\"auto",647405,35,"filters\",align:\"center\"}]",650816,32,645821,72,"right",646608,32,646796,72,"attendance",647648,33,648511,215,"Month",645710,33,"font-weight: bold; padding-top: 0.5em",648800,113,"right",648919,36,649068,276,"Dashboard",635231,65,"scrollable:true,itemId:\"dynamicDashboard",650319,50,"panel\",scrollable:true",669607,32,633374,110,650579,370,"dashboard\"}]",666526,38,"dbPanel\",margin:10}]}]}},0,[\"dynamicdashboard",586944,44,",\"dynamicdashboard",302400,34,"navigationview:true,dynamicdashboard:true},[\"widget.dynamicdashboard\"],0,[Poise.view,\"DynamicDashboard",669520,35,649337,151," dynamic-op-list\",title:\"Workstations\",scrollToTopOnRefresh:false",649510,109,"dynamic-item {state}-item",632702,137,"U</span> {operator",632856,36," list-message\"><span class=\"icon-custom\">i</span> {messag",649869,322,"Operators",650191,84,"OpView",650319,50,650432,517,"op",650948,61,"op",651024,57,"op",442960,38,"navigationview:true,dynamicopview:true},[\"widget.dynamicopview\"],0,[Poise.view,\"DynamicOperator",663583,40,"DynamicWorkstationMac",649355,133," dynamic-mac-list\",title:\"Workstations\",scrollToTopOnRefresh:false",649510,109,"dynamic-item {mac_state}-item",632702,190," list-message\"><span class=\"icon-custom\">i</span> {mac_messag",649869,43,"mac_list",442927,38,",\"list\",\"dynamic_workstation_mac",649982,83,"mac",650064,41,"mac",650104,41,"Mac",633184,40,"ynamicMachines",650191,84,"MacView",650319,50,650432,517,"ma",650947,39,"mac_list\"}]}]}},0,[\"dynamicmac",651024,57,"mac",442960,38,"navigationview:true,dynamicmacview:true},[\"widget.dynamicmacview\"],0,[Poise.view,\"DynamicMachine",663583,40,"DynamicHome",645080,45,"100%\",itemId:\"dynamicHome",650279,42,637580,149,650386,46,"dynamicdashboard\",title:\"Dashboard\",tab:{cls:\"no-icon\"}},{xtype:\"dynamicopview\",title:\"Operators\",tab:{cls:\"no-icon\"}},{xtype:\"dynamicmacview\",title:\"Machines\",tab:{cls:\"no-icon\"}}]}},0,[\"dynamichome",591766,38,",\"dynamic",651549,52,"dynamichome:true},[\"widget.dynamichome\"],0,[Poise.view,\"DynamicHo",652976,32,651291,199,"home",651495,295,"cls:\"log-form",651788,105,"cls:\"loggedAt",654784,143,652034,1536,654584,101,"cls:\"log-form",651788,83,"Output\",margin:\"10\",cls:\"loggedAt",654784,806,653562,109,"cls:\"log-form",651788,83,"Rework\",margin:\"10\",cls:\"loggedAt",654784,143,653913,663,655590,2857,"Poise.util.Config.currentDateTim",658906,126,658679,1932,"downtimeSection:\"panel[name=downtime_container] #reportSection\",reworkSection:\"panel[name=rework_container] #reportSection\",outputSection:\"panel[name=output_container] #reportSection\",sectionO",660560,36,660655,220,"downtimeSection:{change:\"refreshDowntimeChart\"},reworkSection:{change:\"refreshReworkChart\"},outputSection:{change",660852,891,"a=g.up(\"#downtime",662349,39,"section=g.up(\"#downtimeChart\").down(\"#reportSection",662127,83,"downtim",662653,34,"+\"&report_section=\"+section",661853,63,"a=g.up(\"#rework",662349,39,"section=g.up(\"#reworkChart\").down(\"#reportSection",662127,83,"rework",662654,33,"+\"&report_section=\"+section",662024,117,"section",662088,35,"Section",662127,122,"+\"&report_section=\"+section",662249,491,"Viewport",440365,37,"\"Loading data...\"});",662736,82,"Ext.each(e,function(g,f){if(g.values.length==0){}});b.renderChartData(e);Ext.Viewport.setMasked(false)}}",669469,35,662875,268,"Average</th>\",\"<th>Max</th>\",\"<th>Min",663189,53,"average}</td>\",\"<td>{max}</td>\",\"<td>{min",663967,36,663386,40,"3\"><i>No Output",664062,135,663578,45,"Machine",663632,119,"print",663755,93,"Mac ID</th>\",\"<th>Name</th>\",\"<th>Attachment</th>\",\"<th>Availability</th>\",'<th style=\"width: 20%\">Actions</th>',\"</thead>\",'<tpl for=\"machines\">',\"<tr>\",\"<td>{mac_id}</td>\",\"<td>{name}</td>\",'<td>{[values.attachment ? values.attachment : \"<i>Not Available</i>\"]}</td>',\"<td>{available_units",664849,36,"div style=\"margin: 0.3em 0.2em;\">','<div class=\"duration\"><input type=\"text\" value=\"1\" placeholder=\"HH\" /></div>','<div data-avl=\"{available_units}\" data-mac-id=\"{id}\" data-state=\"{parent.state}\" data-ws-id=\"{parent.",665521,97,"class=\"x-button-label {parent.state}\">Allocate</span>',\"</div>\"",665664,35,665801,42,"c){var b=this;",665846,97,"n,j){var g=n.getTarget(\"div.x-button\");if(g){var f=g.previousSibling.childNodes[0].value;var h=g.getAttribute(\"data-mac-id\");var m=g.getAttribute(\"data-ws-id\");var l=g.getAttribute(\"data-state\");var k=g.getAttribute(\"data-avl\");if(l!=\"yellow\"){if(parseInt(k)<=0){Ext.Msg.alert(\"Deviation\",\"No new machine available for allocation\");return false}if(f!=\"\"&&b.isInt(f)&&parseInt(f)<=8&&parseInt(f)>0){a.createMacDeviation(m,h,f)}else{Ext.Msg.alert(\"Deviation\",\"Enter valid no of hours to deviate\");return false}}else{Ext.Msg.alert(\"Deviation\",\"The workstation has already been allocated a new machine\")}}}})},isInt:function(b){var a=/^-?[0-9]+$/;return a.test(b",613980,32,572432,32,"},0,0,[Poise.view,\"Machin",637439,40,"Workstation",663632,119,"briefcase",663755,93,"Section</th>\",\"<th>Operation</th>\",\"<th>Machine</th>\",\"</thead>\",'<tpl for=\"workstation\">',\"<tr>\",\"<td>{section_name}</td>\",\"<td>{operation_name}</td>\",\"<td>{machine_name}</td",616586,116,"view,\"Workst",587103,33,666347,164,"w",666621,32,666498,563,"view.WSDetailsMac",666367,52,"MacPanel",653627,59,"panel\",layout:\"fit\",itemId:\"w",666621,32,"fit\",itemId:\"machine",666621,173,"MacBack\"}]}]}},0,[\"ws_details_mac",644127,43,"formpanel\",\"ws_details_mac",641326,51,"formpanel:true,ws_details_mac",666961,33,"mac",666993,33,"Mac",642160,41,"ption",663631,79,"tpl exec=\"values.parent = parent;\"></tpl",664324,238,"'<th style=\"width: 15%\">Operation</th>',\"<th>Recent Output (Last 8 hours)</th>\",\"<th>Operator(s)</th>\",'<th style=\"width: 15",664653,52,"pl exec=\"values.parent = parent;\"></tpl",664699,196,"utput\">','<tpl if=\"average &gt; 60 || average == 60",665120,36,"<i>Avg: </i> &nbsp; <span style=\"margin: 0 0 0 0.2em\">{average}</span></span>',\"</tpl>\",'<tpl if=\"average &lt; 60\">','<span class=\"boxed red-item\"><i>Avg: </i> &nbsp; <span style=\"margin: 0 0 0 0.2em\">{average}</span></span>',\"</tpl>\",'<tpl if=\"max &gt; 60 || max == 60",665120,36,"<i>Max: </i> &nbsp; <span style=\"margin: 0 0 0 0.2em\">{max}</span></span>',\"</tpl>\",'<tpl if=\"max &lt; 60\">','<span class=\"boxed red-item\"><i>Max: </i> &nbsp; <span style=\"margin: 0 0 0 0.2em\">{max}</span></span>',\"</tpl>\",'<tpl if=\"min &gt; 60 || min == 60",665120,36,"<i>Min: </i> &nbsp; <span style=\"margin: 0 0 0 0.2em\">{min}</span></span>',\"</tpl>\",'<tpl if=\"min &lt; 60\">','<span class=\"boxed red-item\"><i>Min: </i> &nbsp; <span style=\"margin: 0 0 0 0.2em\">{min}</span></span>',\"</tpl>\",\"</tpl>\",\"",664850,101,"<i class=\"fa fa-square\"></i> {[values.name ? values.name : \"<i>Not Assigned</i>\"]",664956,48,"<i class=\"fa fa-square\"></i> {[values.skill ? \"Skill - \" + values.skill : \"<i>Not Assigned</i>\"]",665018,39,664860,46,"'<div style=\"margin: 0.3em 0.2em;\">','<div class=\"duration\"><input type=\"text\" value=\"1\" placeholder=\"HH\" /></div>','<div data-operator=\"{id}\" data-old-ws=\"{[parent.old_ws_id]}\" data-state=\"{[parent.state]}\" data-new-ws=\"{parent.",665521,97,"class=\"x-button-label {[parent.state]}\">Assign</span>',\"</div>\",\"</div>\",\"</tpl>\",\"",663968,36,665711,39,"5",665751,92,"c){var b=this;",665846,97,"n,k){var j=n.getTarget(\"div.x-button\");if(j){var f=j.previousSibling.childNodes[0].value;var h=j",666067,33,"m=j.getAttribute(\"data-new-ws\");var g=j.getAttribute(\"data-operator\");var l=j.getAttribute(\"data-state\");if(g==\"\"){Ext.Msg.alert(\"Deviation\",\"No operator found for this deviation. Please assign someone else.\");return false}if(l!=\"yellow\"){if(f!=\"\"&&b.isInt(f)&&parseInt(f)<=8&&parseInt(f)>0){a.createDeviation(h,m,g,f)}else{Ext.Msg.alert(\"Deviation\",\"Enter valid no of hours to deviate.\");return false}}else{Ext.Msg.alert(\"Deviation\",\"The workstation is already part of a deviation.\")}}}})},isInt:function(b){var a=/^-?[0-9]+$/;return a.test(b",666159,199,663623,270,"th>Attendance Today</th>\",\"<th>Skill Level",663884,74,"<span>{name}</span></td>\",'<td><span class=\"{name_class}\"><i class=\"fa fa-square\"></i> {[values.name_class == \"red-item\" ? \"Absent\" : \"Present\"]}</span></td>','<td><span class=\"{skill_class}\"><i class=\"fa fa-square\"></i> {skill}</span>",663351,35,"perator",663391,35,"4",664046,198,"DynamicDBContent",662928,74,"tpl if=\"work_stations.length &gt; 0\" >','<div class=\"db-table-header\"><i class=\"fa fa-tag\"></i> {section_name}</div>','<tpl for=\"work_stations\">','<div class=\"ws-wrapper\">','<div class=\"ws-header\">',\"<span>{[xindex]}. {operation}</span>\",\"</div>\",'<div class=\"ws-body\">','<div data-ws=\"{ws_id}\" data-sec=\"{section}\" data-mac=\"{machine}\" data-op=\"{operation}\" data-state=\"{op_class}\" class=\"op {op_class}",632892,36,"</div>','<div data-ws=\"{ws_id}\" data-sec=\"{section}\" data-mac=\"{machine}\" data-op=\"{operation}\" data-state=\"{mac_class}\" class=\"mac {mac_class}",632811,36,"</div>',\"</div>\",\"</div>\",\"</tpl>\",\"</tpl",665809,34,"c){var b=this;",665846,97,"n,h){var g=n.getTarget(\"div.op\");var m=n.getTarget(\"div.mac\");if(g){var l=g.getAttribute(\"data-ws\");var o=g.getAttribute(\"data-sec\");var k=g.getAttribute(\"data-op\");var j=g.getAttribute(\"data-mac\");var f=g.getAttribute(\"data-state\");a.showWSDetailsForDB({id:l,state:f,section_name:o,operation_name:k,machine_name:j})}else{if(m){var l=m.getAttribute(\"data-ws\");var o=m.getAttribute(\"data-sec\");var k=m.getAttribute(\"data-op\");var j=m.getAttribute(\"data-mac\");var f=m.getAttribute(\"data-state\");a.showWSMacDetailsForDB({id:l,mac_state:f,section_name:o,operation_name:k,machine_name:j})}}}}",613980,32,572432,32,"},0,0,[Poise.view,\"DynamicDBContent",660028,41,667072,61,"OperatorsView\",\"DynamicMachinesView\",\"DynamicDashboard\",\"DynamicWorkstationList\",\"DynamicWorkstationMacList\",\"WSDetailsPanel\",\"WSDetailsMac",667174,50,",\"MachineView\",\"WorkstationView\",\"DynamicDBContent",672891,35,"DynamicWorkstations\"],refs:{opListView:\"dynamicopview dynamic_workstation_list\",macListView:\"dynamicmacview dynamic_workstation_mac_list\",dynamicOpRefreshButton:\"dynamicop",667351,35,"op-list]\",dynamicMacRefreshButton:\"dynamicma",667350,36,"mac-list]\",dynamicDBRefreshButton:\"dynamicdashboard button[action=refresh-dynamic-dashboard",667390,42,"dynamicMacBackButton:\"button#dynamicMa",667425,52,"OpRefreshButton:{tap:\"refreshOpWorkstationList\"},dynamicMacRefreshButton:{tap:\"refreshMacWorkstationList\"},dynamicDBRefreshButton:{tap:\"loadDynamicDashboard\"},opListView:{itemtap:\"onOpItemTapAction\"},macListView:{itemtap:\"onMac",667543,62,"dynamicMa",667565,33,"Ma",667597,75,"c,f,b,a){Ext.Viewport",440365,37,"\"Loading data...\"});var e",668634,88,667772,34,"c+\"&new_ws_id=\"+f+\"&operator_id=\"+b+\"&hours=\"+a",667823,32,"j){Ext.Msg.alert(\"Deviation\",\"Operator Deviation created for \"+a+\" hour(s)\");var l=Ext.JSON.decode(j.responseText);var k",667964,35,"OpView\")[0].pop();var m",667964,35,"Dashboard\")[0].pop();var h",639566,41,"g=localStorage.getItem(\"obId\");h",668303,37,"g},callback:function(){e.loadDynamicDashboard();Ext.Viewport.setMasked(false)}})}})},createMacDeviation:function(e,c,a){Ext.Viewport",440365,37,"\"Loading data...\"});",668629,93,"create_mac_deviation.json?ws_id=\"+e+\"&mac_id=\"+c+\"&hours=\"+a",667823,62,"New machine allocated for \"+a+\" hour(s)",667918,81,"MacView\")[0].pop();var l",667964,35,"Dashboard",668003,129,",callback:function(){b.loadDynamicDashboard();Ext.Viewport.setMasked(false)}})}})},refreshOp",668193,165,"op",668359,53,"refreshMac",668193,165,"mac",668359,33,"mac_list\").setStore(b)},onOp",668414,66,"onMac",668414,47,"Mac",668461,107,"OpView\").push(a);this.addWSDetailsToView(a,[b]);this.loadData(b.id,a,b.state)},showWSMac",668486,60,"MacPanel\");c.up(\"#dynamicMacView\").push(a);this.addWSDetailsToView(a,[b]);this.loadMacData(b.id,a,b.mac_state)},showWSDetailsForDB:function(",668505,49,667965,34,"Dashboard\")[0].push(a);this.addWSDetailsToView(a,[b]);this.loadData(b.id,a,b.state)},showWSMacDetailsForDB:function(",668505,41,"MacPanel\");",667965,34,"Dashboard\")[0].push(a);this.addWSDetailsToView(a,[b]);this.loadMacData(b.id,a,b.mac_state)},loadData:function(e,a,c){Ext.Viewport",440365,37,"\"Loading data...\"});",668629,127,"e",659727,59,"b.addOperatorsToView(a,g);b.addOutputsToView(a,g);b.addOptionsToView(a,g,e,c);Ext.Viewport.setMasked(false)}})},loadMacData:function(e,a,c){Ext.Viewport",440365,37,"\"Loading data...\"});",668629,96,"mac",668724,32,"e,success:function(f){var h",659753,33,"var g=Ext.create(\"Poise.view.MachineView\",{data:[{ws_id:e,state:c,title:\"Machine Availability\",machines:h.machines}]});a.down(\"#machinesTable\").add(g);Ext.Viewport.setMasked(false",668890,42,"if(b.up(\"#dynamicOpView\")!=undefined){b.up(\"#dynamicOpView\").pop()}else{if(b.up(\"#dynamicDashboard\")!=undefined){b.up(\"#dynamicDashboard\").pop()}}},goBackToDynamicMacView:function(b,c,a){if(b.up(\"#dynamicMacView\")!=undefined){b.up(\"#dynamicMacView\").pop()}else{if(b.up(\"#dynamicDashboard\")!=undefined){b.up(\"#dynamicDashboard\").pop()}}},addWSDetail",669134,51,"WorkstationView\",{data:[{title:\"Workstation Details\",workstation:c}]});a.down(\"#wsTable\").add(b",668957,269," (Last 8 hours)",669227,84,"e,f,c){Ext.each(e.options,function(g){g.state=c;g.old_ws_id=f});",669316,60,"f,state:c",669377,49,"e",669427,44,",loadDynamicDashboard:function(){Ext.Viewport",440365,37,"\"Loading data...\"});var c=this",639602,36,"var a=Ext.ComponentQuery.query(\"#dbPanel\")[0]",668639,87,"b_list.json?ob_id=\"+b,success:function(e){var g",668783,33,"var f=Ext.create(\"Poise.view.DynamicDBContent\",{data:g});a.removeAll();a.add(f);Ext.Viewport.setMasked(false)}}",669469,81,631451,621,669550,1464,"List",671018,263,"panel\",layout:\"vbox\",itemId:\"togglePanel\"},",653678,43,671429,82,"},updateRecord:function(a){if(a==null||a.get(\"operators_attendance\")===undefined){return}var c=this;var e=c.down(\"#togglePanel\");if(e.getInnerItems().length>0){return}var b=a.get(\"operator_name\").split(\", \").map(function(f){return\"<div style='margin: 1em 0'><span class='icon-custom'>U</span> \"+f+\"</div>\"}).join(\"\");c",671628,93,"c",671722,89,"c.down(\"#operatorCmp\").setHtml(b);c",671904,46,"c.addToggleFields(a.get(\"operators_attendance\"),a.get(\"attendance_today\"),e);Ext.dataview.component.List",672092,51,"addToggleFields:function(b,a,e){var c=this;if(b.length>0){Ext.each(b,function(f){e.add({xtype:\"togglefield",671310,41,"value:f[1],name:f[0]",671350,34,",listeners:{change:function(j,h,g){if(j.up(\"attendancelistitem\")!=undefined",672174,123,"j",672298,60,"workstation_operator_id:j.getName(),logged_at:Ext.ComponentQuery.query(\"#attendanceView\")[0]",672391,40,"j",672432,102,"}})})}else{e.add({xtype:\"togglefield",671310,41,"value:a",671350,34,",listeners:{change:function(h,g,f){if(h.up(\"attendancelistitem\")!=undefined",672174,123,"h",672298,60,"workstation_operator_id:0,logged_at:Ext.ComponentQuery.query(\"#attendanceView\")[0]",672391,40,"h",672432,102,"}})}",672532,65,"list",672590,73,"list",672653,239,",\"DynamicHome",672891,80,"Sections\",\"ObStore\",\"ChartData\",\"ReportTime",672990,858]